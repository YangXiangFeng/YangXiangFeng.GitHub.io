---
layout: post
title: 第四章对象和类
published: true
tags: [core_java]
---

使用构造器创建一个对象。构造器的名字要与类名字相同，它是一种特殊的方法，所以要加上括号。例如Date类的构造器就是Date，加上括号，
```
Date data = new Date()；
```

一个对象变量并没有包含这个对象,而仅仅引用了一个对象.

在一个类的任何方法中,包括构造器,不要给一个变量命名和实例一样.

类的实例一般都设为私有,类的方法设为共有.

final实例
例如 private final String name;
这样就确保每一个构造器执行之后,这个实例的值被设置了,并且在后面的操作中不能对它进行修改.  一个对象的name值一旦确定了就不会被修改了.

final修饰符大都应用与基本数据类型的实例,或者不可变类的实例(如果一个类的所有方法都不会改变其对象,这种类就是不可变类.String类就是不可变类).
对于可变类,
private final Date hiredate;
意味着存储在hiredate变量中的对象引用在对象构造之后不能被改变,而不是说hiredate是一个常量.

静态实例和静态方法
静态实例  每一个类中只能有一个静态实例,
静态变量使用的较少,静态常量使用的比较多,

静态方法
静态方法是不能对对象进行操作的方法.
因为静态方法不能操作对象,所以不能在静态方法中访问实例.但是静态方法可以访问自身类中的静态域.

建议用类名,而不是对象调用静态方法.(难道直接用类名调用的方法都是静态方法吗)

有两种情况使用静态方法:
一个方法不需要访问对象的状态,其所需参数都是通过显式参数提供,比如Math.pow
一个方法只需要访问类的静态域



不需要用对象就可以调用静态方法.例如不需要构造Math对象就可以调用Math.pow
同理main方法也是一种静态方法.(原来如此,怪不得写程序main方法前总是用一个static,而且没有对象就能运行main方法呢,原来是因为它是静态方法).
main方法不对任何对象进行操作.(当然了,因为前面已经记过了,静态方法不能对对象进行操作.).
程序启动时还没有一个对象,静态方法main将执行并创建对象.

每个类可以有一个main方法.可以用于对类进行测试.
在一个类中写main测试,那么在总的程序这个main并不会被执行.所以可以用它测试.
只会执行带public类中的main方法.


对象构造
构造对象非常重要，所以java提供了多种编写构造器的方式。
重载
一个类中如果有多个方法有相同的名字,不同的参数,便产生了重载.
编译器会通过参数选择执行哪个方法,如果找不到匹配的方法或者找到多个那么便会产生编译错误.
(java允许重载任何方法,而不只是构造器方法.因此要描述一个方法必须指出方法的名字和参数类型)

如果在一个类中,构造器没有显式的给实例(类中的实例)初始化,那么实例会默认初始化为0(数值类型),false(布尔类型),null(对象).这是不推荐的用法.
也就是说会在构造器初始化实例.

默认构造器
默认构造器是没有参数的构造器.如果在编写一个类时没有写构造器,系统会提供一个默认构造器,这个构造器将所有实例初始化(0,false,null).
如果类中有至少一个构造器,但是没有提供默认构造器,则在构造对象时如果没有提供构造参数就会视为不合法.(肯定的啊,因为这时没有默认构造器,类中的构造器就是你写的那几种,不提供正确的参数编译器就会找不到构造器肯定会出错)

显式实例初始化
确保不管怎样调用构造器每个实例都可以被设置为一个有意义的初始值,这是一种很好的设计习惯.
可以在类定义中直接初始化一个实例.在执行构造器之前,先执行赋值操作.当一个类的所有构造器都希望把相同的值赋给某个特定的实例时,常使用这种方法.

this关键字
this.instanceName 表示调用这个类里面的实例

如果构造器的第一个语句形如this(...), this(参数1,参数2,...)  表示构造器将调用同一个类的另外一个构造器.
例子
public Employee(double s){
//calls Employee(String,double)
this("Employee #"+nextId,s);
nextId++;
}
当调用new Employee(50000)时,Employee(double)构造器将调用Employee(String,double)构造器.
采用这种方式使用this关键字非常有用,这样对公共构造器代码部分只编写一个即可.

初始化实例的方法现在有两个了,
一个是在类中直接给实例赋值,
二是在构造器给实例赋值,
第三个是在块中初始化数值. 程序会首先初始化快,然后运行构造器方法. 但这种方式不常用.
初始化块
可以把初始化放到一个块里。初始化块分两种。一种是普通的块初始化，一种是静态块初始化。
普通块初始化
private String name;
private int int;
{
name = “sora”；
id = 3；
}；
静态初始化块
静态初始化块只能初始化静态实例，不能初始化普通实例。并且和普通初始化块不一样，它只能执行一次，只在类加载时执行。
private static String name;
private static int id;
static
{
name = "sora";
id = 3;
}

随机数类
java.util.Random
Random()
Random generator = new Random(); //构造一个随机数生成器
int i = generator.nextInt(int n)              //返回一个0~n-1的随机数


包 

包是组织类的一种方式.标准的java类库分布在多个包中,包括java.lang,java.util,java.net  
标准的java包具有一个层次结构,如同硬盘目录一样.所有标准的java包都处于java和javax包层次中.
使用包的主要原因是确保类名的唯一性.假如两个程序员都建立了一个Employee类,只要将这些类放在不同包就不会产生冲突.
为了保证包名的唯一性,sun公司建议将公司的因特网域名(这显然是独一无二的)以逆序的形式作为包名,并且对于不同的项目使用不同的子包.(这就是soramelon.com包名的由来吗?)

一个类可以使用所属包的所有类,以及其他包中的共有类(public class).
要想访问另一个包中的共有类,主要的方式是用import语句.
可以使用import语句导入一个特定的类或整个包.import语句应该位于源文件的顶部但位于package语句的后面.
使用import语句的唯一好处是可以简便,使用简短的名字而不是完整的包来引用一个类.当类名有冲突的时候就需要写出全称了,包名加类名

静态导入
import不仅可以导入包和类,还可以导入静态方法和静态域.
(怪不得前面有一次引入import时丢掉了static就出错了呢,原来他们是静态方法(或者域))
例如
import static java.lang.System.*
就可以使用System类的静态方法和静态域,而不必加类前缀.
out.println("Hello");  //System.out

这种方式不利于代码的清晰度,不过可以简便.

将类放入包
要想将类放入一个包,必须在前面将包名字放在前面.
如package soramelon.com
如果没有这个语句,这个类就被放入默认包里面了.默认包是没有名字的包.
包作用域
public修饰符标记的部分可以被任意类使用,private标记的只能被定义它们的类使用.
一般而言，最好将方法声明为public，而将实例声明为private。
如果没有被指定public或者private,这个部分(类,方法,或者变量)可以被同一个包的所有方法访问.

所以变量必须显式的标记为private,否则就可以被同一个包中的类访问了,这样肯定不行.
































